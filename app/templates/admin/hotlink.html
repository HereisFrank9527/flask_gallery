{% extends "admin/base.html" %}

{% block content %}
<h1>防盗链设置</h1>

<div class="form-container">
    <form method="post" class="hotlink-form">
        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="enable" {% if enable %}checked{% endif %}>
                <span>启用防盗链保护</span>
            </label>
            <small>启用后，只有配置的域名才能访问图片资源</small>
        </div>

        <div class="form-group">
            <label for="domains">允许的域名列表（每行一个）</label>
            <textarea id="domains" name="domains" rows="10" placeholder="localhost&#10;127.0.0.1&#10;yourdomain.com&#10;www.yourdomain.com">{{ domains }}</textarea>
            <small>每行输入一个域名，不需要添加http://或https://</small>
        </div>

        <div class="info-box">
            <h4>说明：</h4>
            <ul>
                <li>防盗链通过检查HTTP Referer头来判断请求来源</li>
                <li>只有来自允许域名的请求才能访问图片</li>
                <li>直接访问（无Referer）的请求会被允许</li>
                <li>修改后需要重启应用才能生效</li>
                <li>建议添加所有可能访问的域名，包括www和非www版本</li>
            </ul>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">保存设置</button>
            <a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary">取消</a>
        </div>
    </form>
</div>

<style>
.checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    font-weight: 600;
    color: #2c3e50;
}

.checkbox-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.info-box {
    background-color: #e3f2fd;
    padding: 1rem;
    border-radius: 4px;
    margin-bottom: 1rem;
    border-left: 4px solid #2196f3;
}

.info-box h4 {
    margin-bottom: 0.5rem;
    color: #1976d2;
}

.info-box ul {
    margin-left: 1.5rem;
    color: #555;
}

.info-box li {
    margin: 0.3rem 0;
}
</style>
{% endblock %}
